{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '24514938-64e9aafcd379537f737cf2780';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    throw new Error(`Error fetching images: ${error.message}`);\n  }\n}\n","function createImageCard(image) {\n  return `\n    <li class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\">\n        <div class=\"photo-card\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes</b>\n              ${image.likes}\n            </p>\n            <p class=\"info-item\">\n              <b>Views</b>\n              ${image.views}\n            </p>\n            <p class=\"info-item\">\n              <b>Comments</b>\n              ${image.comments}\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads</b>\n              ${image.downloads}\n            </p>\n          </div>\n        </div>\n      </a>\n    </li>\n  `;\n}\n\nexport function renderImageGallery(images) {\n  return images.map(createImageCard).join('');\n}\n\nexport function clearGallery(gallery) {\n  gallery.innerHTML = '';\n}\n\nexport function appendToGallery(gallery, markup) {\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showLoader(loader) {\n  loader.style.display = 'block';\n}\n\nexport function hideLoader(loader) {\n  loader.style.display = 'none';\n}\n\nexport function showLoadMoreBtn(btn) {\n  btn.style.display = 'block';\n}\n\nexport function hideLoadMoreBtn(btn) {\n  btn.style.display = 'none';\n}\n\nexport function smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImageGallery,\n  clearGallery,\n  appendToGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  smoothScroll\n} from './js/render-functions.js';\n\nimport './css/styles.css';\n\n// DOM elements\nconst searchForm = document.querySelector('.form');\nconst searchInput = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\n// Global variables\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\nconst perPage = 15;\n\n// Initialize SimpleLightbox\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// Event listeners\nif (searchForm) {\n  searchForm.addEventListener('submit', onSearchFormSubmit);\n}\n\nif (loadMoreBtn) {\n  loadMoreBtn.addEventListener('click', onLoadMoreClick);\n}\n\n// Search form submit handler\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n\n  const query = searchInput.value.trim();\n\n  if (query === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  // Reset pagination for new search\n  currentQuery = query;\n  currentPage = 1;\n  clearGallery(gallery);\n  hideLoadMoreBtn(loadMoreBtn);\n  showLoader(loader);\n\n  try {\n    const data = await fetchImages(query, currentPage, perPage);\n    hideLoader(loader);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    totalHits = data.totalHits;\n    const markup = renderImageGallery(data.hits);\n    gallery.innerHTML = markup;\n\n    // Refresh lightbox\n    lightbox.refresh();\n\n    // Check if there are more images to load\n    if (currentPage * perPage < totalHits) {\n      showLoadMoreBtn(loadMoreBtn);\n    }\n\n    iziToast.success({\n      title: 'Success',\n      message: `Hooray! We found ${totalHits} images!`,\n      position: 'topRight',\n    });\n  } catch (error) {\n    hideLoader(loader);\n    console.error('Error fetching images:', error);\n\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later!',\n      position: 'topRight',\n    });\n  }\n}\n\n// Load more button click handler\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  showLoader(loader);\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage, perPage);\n    hideLoader(loader);\n\n    const markup = renderImageGallery(data.hits);\n    appendToGallery(gallery, markup);\n\n    // Refresh lightbox\n    lightbox.refresh();\n\n    // Smooth scroll\n    smoothScroll();\n\n    // Check if we've reached the end\n    if (currentPage * perPage >= totalHits) {\n      hideLoadMoreBtn(loadMoreBtn);\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    hideLoader(loader);\n    console.error('Error loading more images:', error);\n\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later!',\n      position: 'topRight',\n    });\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","createImageCard","image","renderImageGallery","images","clearGallery","gallery","appendToGallery","markup","showLoader","loader","hideLoader","showLoadMoreBtn","btn","hideLoadMoreBtn","smoothScroll","cardHeight","searchForm","searchInput","loadMoreBtn","currentQuery","currentPage","totalHits","lightbox","SimpleLightbox","onSearchFormSubmit","onLoadMoreClick","event","iziToast","data"],"mappings":"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"}